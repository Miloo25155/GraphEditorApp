<!DOCTYPE html>
<html>
<head>
	<title>No Regression App - Dev in Progress</title>
	<script src="https://cdn.jsdelivr.net/npm/vue"></script>
	<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
 	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
 	<link rel="stylesheet" href="index.css">
</head>
<body>
	<div id="appContainer" v-on:mouseup="deselectPoint">
		<div v-for="(point, index) in points" v-on:mousedown="selectPoint(index)"
			 v-bind:id="'point_' + index" v-bind:class="{ 'selected': currentSelectedPointIndex === index }" class="pointInContainer">
			<span class="fa fa-info-circle"></span>
		</div>
	</div>
</body>
</html>

<script>
	var mainVue = new Vue({
		el: "#appContainer",
		data: {
			points:[
				{x: 5, y: 300},
				{x: 105, y: 300},
				{x: 205, y: 300},
				{x: 305, y: 300},
				{x: 405, y: 300},
				{x: 505, y: 300},
				{x: 605, y: 300},
				{x: 705, y: 300}
			],
			currentSelectedPointIndex: -1,
			pointSize: 10,
			currentPointElement: null
		},
		mounted: function(){
			this.calculatePointPosition();
		},
		methods:{
			calculatePointPosition: function(){
				for (let i = 0; i < this.points.length; i++) {
					let point = document.getElementById("point_"+i);

					point.style.left = this.points[i].x + "px";
					point.style.top = this.points[i].y + "px";
				}
			},
			calculateSinglePointPosition: function(index){
				let point = document.getElementById("point_"+index);
				point.style.left = this.points[index].x + "px";
				point.style.top = this.points[index].y + "px";
			},
			selectPoint: function(index){
				this.currentSelectedPointIndex = index;

				this.currentPointElement = document.getElementById("point_"+index);
				document.addEventListener("mousemove", function(e){
					//let x = e.clientX;
					let y = e.clientY;
					if(this.currentPointElement != null){
						this.currentPointElement.style.top = (y -15) + "px";	
					}
				}.bind(this))

			},
			deselectPoint: function(){
				//delete listener
				this.currentPointElement = null;
				document.removeEventListener("mousemove", null);
				this.currentSelectedPointIndex = -1;
			},
		}
	})
</script>